<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cashflow Online | Jogue com seu Irm√£o</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #2C3E50;
            --secondary: #3498DB;
            --success: #2ECC71;
            --danger: #E74C3C;
            --warning: #F39C12;
            --light: #ECF0F1;
            --dark: #2C3E50;
            --player1: #E74C3C;
            --player2: #3498DB;
        }

        body {
            background: linear-gradient(135deg, #1a2a3a, #2c3e50);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            padding: 20px;
            margin-bottom: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            border: 2px solid var(--secondary);
        }

        h1 {
            color: var(--warning);
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .subtitle {
            color: var(--light);
            font-size: 1.1rem;
        }

        .game-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }

        @media (min-width: 992px) {
            .game-container {
                grid-template-columns: 1fr 1fr;
            }
        }

        .player-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            border: 2px solid;
            min-height: 400px;
        }

        .player-1-section {
            border-color: var(--player1);
        }

        .player-2-section {
            border-color: var(--player2);
        }

        .player-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid;
        }

        .player-1-section .player-header {
            border-color: var(--player1);
        }

        .player-2-section .player-header {
            border-color: var(--player2);
        }

        .player-name {
            font-size: 1.8rem;
            font-weight: bold;
        }

        .player-1-name {
            color: var(--player1);
        }

        .player-2-name {
            color: var(--player2);
        }

        .player-status {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            background: var(--dark);
        }

        .current-turn {
            background: var(--warning) !important;
            color: var(--dark);
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .player-info {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .info-card {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid var(--secondary);
        }

        .info-label {
            font-size: 0.9rem;
            color: var(--light);
            margin-bottom: 5px;
        }

        .info-value {
            font-size: 1.4rem;
            font-weight: bold;
        }

        .income {
            color: var(--success);
        }

        .expense {
            color: var(--danger);
        }

        .controls {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            text-align: center;
        }

        .controls h3 {
            color: var(--warning);
            margin-bottom: 15px;
        }

        .dice-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
        }

        .dice {
            width: 80px;
            height: 80px;
            background: white;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--dark);
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            user-select: none;
        }

        .dice:hover {
            transform: translateY(-5px);
            transition: transform 0.2s;
        }

        .dice.rolling {
            animation: roll 0.5s infinite;
        }

        @keyframes roll {
            0% { transform: rotate(0deg) scale(1); }
            50% { transform: rotate(180deg) scale(1.1); }
            100% { transform: rotate(360deg) scale(1); }
        }

        .button {
            background: var(--secondary);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            margin: 10px 5px;
            min-width: 180px;
            transition: all 0.3s;
        }

        .button:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        .button-success {
            background: var(--success);
        }

        .button-danger {
            background: var(--danger);
        }

        .button-warning {
            background: var(--warning);
        }

        .game-board {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            text-align: center;
            border: 2px solid var(--secondary);
        }

        .board-title {
            color: var(--warning);
            font-size: 1.5rem;
            margin-bottom: 15px;
        }

        .position-tracker {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(0, 0, 0, 0.2);
            padding: 10px;
            border-radius: 10px;
            margin: 10px 0;
        }

        .position {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
        }

        .position.player-1 {
            background: var(--player1);
        }

        .position.player-2 {
            background: var(--player2);
        }

        .space-info {
            font-size: 0.9rem;
            color: var(--light);
        }

        .card-display {
            background: white;
            color: var(--dark);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: left;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .card-title {
            color: var(--secondary);
            font-size: 1.3rem;
            margin-bottom: 10px;
            border-bottom: 2px solid var(--secondary);
            padding-bottom: 5px;
        }

        .card-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin: 15px 0;
        }

        .card-action {
            text-align: center;
            margin-top: 20px;
        }

        .log-section {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
        }

        .log-title {
            color: var(--warning);
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .log-content {
            max-height: 200px;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-radius: 10px;
        }

        .log-entry {
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 0.9rem;
        }

        .log-entry:last-child {
            border-bottom: none;
        }

        .log-player1 {
            color: var(--player1);
            font-weight: bold;
        }

        .log-player2 {
            color: var(--player2);
            font-weight: bold;
        }

        .log-income {
            color: var(--success);
        }

        .log-expense {
            color: var(--danger);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            color: var(--dark);
            border-radius: 15px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-title {
            color: var(--secondary);
            margin-bottom: 20px;
            font-size: 1.5rem;
        }

        .close-modal {
            float: right;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--danger);
        }

        .assets-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .asset-card {
            background: var(--light);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid var(--success);
        }

        .asset-name {
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--dark);
        }

        .asset-value {
            color: var(--success);
            font-weight: bold;
        }

        .connection-status {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 5px;
        }

        .connected {
            background: var(--success);
            animation: pulse 2s infinite;
        }

        .disconnected {
            background: var(--danger);
        }

        .instructions {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            border: 2px dashed var(--warning);
        }

        .instructions h3 {
            color: var(--warning);
            margin-bottom: 15px;
        }

        .instructions ul {
            padding-left: 20px;
            line-height: 1.6;
        }

        .instructions li {
            margin-bottom: 8px;
        }

        footer {
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            color: var(--light);
            font-size: 0.9rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .winner-banner {
            background: linear-gradient(135deg, var(--warning), #ff9f43);
            color: var(--dark);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            font-size: 1.5rem;
            font-weight: bold;
            margin: 20px 0;
            animation: celebrate 2s infinite;
        }

        @keyframes celebrate {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-coins"></i> CASHFLOW ONLINE</h1>
            <p class="subtitle">Jogue com seu irm√£o √† dist√¢ncia em tempo real!</p>
            <div style="margin-top: 10px;">
                <span class="connection-status connected"></span>
                <span>Pronto para jogar! Compartilhe esta tela com seu irm√£o</span>
            </div>
        </header>

        <div class="instructions">
            <h3><i class="fas fa-info-circle"></i> COMO JOGAR √Ä DIST√ÇNCIA:</h3>
            <ul>
                <li><strong>1.</strong> Compartilhe esta tela pelo Zoom, Meet ou WhatsApp Video</li>
                <li><strong>2.</strong> Cada jogador controla suas pr√≥prias decis√µes quando for sua vez</li>
                <li><strong>3.</strong> Discutam as oportunidades juntos antes de comprar</li>
                <li><strong>4.</strong> O objetivo: sair da "Corrida dos Ratos" para a "Via R√°pida"</li>
                <li><strong>5.</strong> Ganha quem comprar um sonho na Via R√°pida primeiro!</li>
            </ul>
        </div>

        <div class="game-container">
            <!-- JOGADOR 1 -->
            <div class="player-section player-1-section">
                <div class="player-header">
                    <div class="player-name player-1-name">
                        <i class="fas fa-user"></i> JOGADOR 1 (VOC√ä)
                    </div>
                    <div class="player-status" id="player1Status">AGUARDANDO</div>
                </div>
                
                <div class="player-info">
                    <div class="info-card">
                        <div class="info-label">Profiss√£o</div>
                        <div class="info-value" id="p1Profession">Enfermeiro</div>
                    </div>
                    <div class="info-card">
                        <div class="info-label">Sal√°rio</div>
                        <div class="info-value income" id="p1Salary">R$ 3.500</div>
                    </div>
                    <div class="info-card">
                        <div class="info-label">Despesas</div>
                        <div class="info-value expense" id="p1Expenses">R$ 2.800</div>
                    </div>
                    <div class="info-card">
                        <div class="info-label">Fluxo de Caixa</div>
                        <div class="info-value income" id="p1Cashflow">R$ 700</div>
                    </div>
                    <div class="info-card">
                        <div class="info-label">Dinheiro Dispon√≠vel</div>
                        <div class="info-value income" id="p1Cash">R$ 1.000</div>
                    </div>
                    <div class="info-card">
                        <div class="info-label">Renda Passiva</div>
                        <div class="info-value income" id="p1Passive">R$ 0</div>
                    </div>
                </div>

                <div class="game-board">
                    <div class="board-title">
                        <i class="fas fa-map"></i> POSI√á√ÉO ATUAL
                    </div>
                    <div class="position-tracker">
                        <div class="position player-1" id="p1Position">0</div>
                        <div class="space-info" id="p1Space">IN√çCIO - Corrida dos Ratos</div>
                    </div>
                    <div id="p1Dreams"></div>
                </div>
            </div>

            <!-- JOGADOR 2 -->
            <div class="player-section player-2-section">
                <div class="player-header">
                    <div class="player-name player-2-name">
                        <i class="fas fa-user-friends"></i> JOGADOR 2 (IRM√ÉO)
                    </div>
                    <div class="player-status" id="player2Status">AGUARDANDO</div>
                </div>
                
                <div class="player-info">
                    <div class="info-card">
                        <div class="info-label">Profiss√£o</div>
                        <div class="info-value" id="p2Profession">Professor</div>
                    </div>
                    <div class="info-card">
                        <div class="info-label">Sal√°rio</div>
                        <div class="info-value income" id="p2Salary">R$ 4.200</div>
                    </div>
                    <div class="info-card">
                        <div class="info-label">Despesas</div>
                        <div class="info-value expense" id="p2Expenses">R$ 3.500</div>
                    </div>
                    <div class="info-card">
                        <div class="info-label">Fluxo de Caixa</div>
                        <div class="info-value income" id="p2Cashflow">R$ 700</div>
                    </div>
                    <div class="info-card">
                        <div class="info-label">Dinheiro Dispon√≠vel</div>
                        <div class="info-value income" id="p2Cash">R$ 1.000</div>
                    </div>
                    <div class="info-card">
                        <div class="info-label">Renda Passiva</div>
                        <div class="info-value income" id="p2Passive">R$ 0</div>
                    </div>
                </div>

                <div class="game-board">
                    <div class="board-title">
                        <i class="fas fa-map"></i> POSI√á√ÉO ATUAL
                    </div>
                    <div class="position-tracker">
                        <div class="position player-2" id="p2Position">0</div>
                        <div class="space-info" id="p2Space">IN√çCIO - Corrida dos Ratos</div>
                    </div>
                    <div id="p2Dreams"></div>
                </div>
            </div>
        </div>

        <!-- CONTROLES CENTRAIS -->
        <div class="controls">
            <h3><i class="fas fa-gamepad"></i> CONTROLES DO JOGO</h3>
            
            <div class="dice-container">
                <div class="dice" id="dice1">?</div>
                <div class="dice" id="dice2">?</div>
            </div>
            
            <button class="button button-warning" id="rollDiceBtn">
                <i class="fas fa-dice"></i> ROLAR DADOS
            </button>
            
            <button class="button" id="endTurnBtn" disabled>
                <i class="fas fa-forward"></i> FINALIZAR TURNO
            </button>
            
            <button class="button button-success" id="showAssetsBtn">
                <i class="fas fa-chart-pie"></i> VER MEUS ATIVOS
            </button>
            
            <button class="button button-danger" id="newGameBtn">
                <i class="fas fa-redo"></i> NOVO JOGO
            </button>

            <div id="winnerMessage"></div>
        </div>

        <!-- CARD DISPLAY -->
        <div id="cardArea" style="display: none;">
            <div class="card-display">
                <div class="card-title" id="cardType">OPORTUNIDADE</div>
                <div id="cardDescription">Carregando carta...</div>
                <div class="card-details" id="cardDetails"></div>
                <div class="card-action">
                    <button class="button button-success" id="acceptCardBtn">
                        <i class="fas fa-check"></i> ACEITAR OFERTA
                    </button>
                    <button class="button button-danger" id="declineCardBtn">
                        <i class="fas fa-times"></i> RECUSAR
                    </button>
                </div>
            </div>
        </div>

        <!-- LOG DO JOGO -->
        <div class="log-section">
            <div class="log-title">
                <span><i class="fas fa-history"></i> HIST√ìRICO DO JOGO</span>
                <button class="button" style="padding: 5px 15px; font-size: 0.9rem;" onclick="clearLog()">
                    Limpar
                </button>
            </div>
            <div class="log-content" id="gameLog">
                <div class="log-entry">Jogo iniciado! Boa sorte!</div>
                <div class="log-entry log-player1">Jogador 1 √© um Enfermeiro</div>
                <div class="log-entry log-player2">Jogador 2 √© um Professor</div>
                <div class="log-entry">√â a vez do Jogador 1</div>
            </div>
        </div>

        <!-- MODAL DE ATIVOS -->
        <div class="modal" id="assetsModal">
            <div class="modal-content">
                <span class="close-modal" onclick="closeModal('assetsModal')">&times;</span>
                <h2 class="modal-title" id="assetsTitle">MEUS ATIVOS</h2>
                <div id="assetsContent">
                    <p>Carregando...</p>
                </div>
            </div>
        </div>

        <footer>
            <p>Jogo desenvolvido especialmente para jogar com familiares √† dist√¢ncia</p>
            <p>Compartilhe o link: <span id="gameLink" style="color: var(--warning);">Copie o URL desta p√°gina</span></p>
        </footer>
    </div>

    <script>
        // =========== ESTADO DO JOGO ===========
        const gameState = {
            currentPlayer: 1,
            gameActive: true,
            diceValue: 0,
            currentCard: null,
            spaces: [
                {type: 'start', name: 'IN√çCIO'},
                {type: 'small', name: 'PEQUENA OPORTUNIDADE'},
                {type: 'payday', name: 'DIA DE PAGAMENTO'},
                {type: 'market', name: 'MERCADO'},
                {type: 'doodad', name: 'DOODAD - GASTO'},
                {type: 'baby', name: 'BEB√ä - Despesas ‚Üë'},
                {type: 'charity', name: 'CARIDADE'},
                {type: 'big', name: 'GRANDE OPORTUNIDADE'},
                {type: 'payday', name: 'DIA DE PAGAMENTO'},
                {type: 'market', name: 'MERCADO'},
                {type: 'small', name: 'PEQUENA OPORTUNIDADE'},
                {type: 'doodad', name: 'DOODAD - GASTO'},
                {type: 'baby', name: 'BEB√ä - Despesas ‚Üë'},
                {type: 'charity', name: 'CARIDADE'},
                {type: 'big', name: 'GRANDE OPORTUNIDADE'},
                {type: 'payday', name: 'DIA DE PAGAMENTO'},
                {type: 'market', name: 'MERCADO'},
                {type: 'small', name: 'PEQUENA OPORTUNIDADE'},
                {type: 'doodad', name: 'DOODAD - GASTO'},
                {type: 'baby', name: 'BEB√ä - Despesas ‚Üë'},
                {type: 'charity', name: 'CARIDADE'},
                {type: 'big', name: 'GRANDE OPORTUNIDADE'}
            ],
            players: {
                1: {
                    name: "Jogador 1 (Voc√™)",
                    profession: "Enfermeiro",
                    salary: 3500,
                    expenses: 2800,
                    cashflow: 700,
                    cash: 1000,
                    passiveIncome: 0,
                    position: 0,
                    inRatRace: true,
                    assets: [],
                    liabilities: [],
                    dreams: []
                },
                2: {
                    name: "Jogador 2 (Irm√£o)",
                    profession: "Professor",
                    salary: 4200,
                    expenses: 3500,
                    cashflow: 700,
                    cash: 1000,
                    passiveIncome: 0,
                    position: 0,
                    inRatRace: true,
                    assets: [],
                    liabilities: [],
                    dreams: []
                }
            }
        };

        // =========== BANCO DE CARTAS SIMPLIFICADO ===========
        const cards = {
            small: [
                {name: "A√ß√µes TechBR", cost: 5000, down: 500, cashflow: 100, type: "a√ß√£o"},
                {name: "A√ß√µes Minera√ß√£o", cost: 8000, down: 800, cashflow: 150, type: "a√ß√£o"},
                {name: "T√≠tulos P√∫blicos", cost: 3000, down: 300, cashflow: 50, type: "renda fixa"},
                {name: "ETF de Dividendos", cost: 6000, down: 600, cashflow: 120, type: "ETF"}
            ],
            big: [
                {name: "Apartamento Aluguel", cost: 150000, down: 15000, cashflow: 800, type: "im√≥vel"},
                {name: "Loja Shopping", cost: 120000, down: 30000, cashflow: 2000, type: "neg√≥cio"},
                {name: "Terreno Loteamento", cost: 80000, down: 8000, cashflow: 400, type: "im√≥vel"},
                {name: "Franquia Lanches", cost: 200000, down: 50000, cashflow: 3000, type: "neg√≥cio"}
            ],
            doodad: [
                {name: "F√©rias na Praia", cost: 800, monthly: 0, description: "Viagem de uma semana"},
                {name: "Carro Novo", cost: 2000, monthly: 400, description: "Parcelado em 5x"},
                {name: "TV 4K 75\"", cost: 3000, monthly: 250, description: "Smart TV √∫ltima gera√ß√£o"},
                {name: "Reforma Cozinha", cost: 1500, monthly: 0, description: "Renova√ß√£o completa"}
            ],
            market: [
                {name: "MERCADO EM ALTA", effect: "a√ß√µes", modifier: 1.5, description: "Suas a√ß√µes valem 50% mais!"},
                {name: "MERCADO EM BAIXA", effect: "a√ß√µes", modifier: 0.7, description: "Suas a√ß√µes valem 30% menos!"},
                {name: "ALTA DOS ALUGU√âIS", effect: "im√≥vel", modifier: 1.2, description: "Alugu√©is aumentaram 20%!"},
                {name: "CRISE IMOBILI√ÅRIA", effect: "im√≥vel", modifier: 0.75, description: "Im√≥veis valem 25% menos!"}
            ]
        };

        // =========== ELEMENTOS DO DOM ===========
        const rollDiceBtn = document.getElementById('rollDiceBtn');
        const endTurnBtn = document.getElementById('endTurnBtn');
        const showAssetsBtn = document.getElementById('showAssetsBtn');
        const newGameBtn = document.getElementById('newGameBtn');
        const acceptCardBtn = document.getElementById('acceptCardBtn');
        const declineCardBtn = document.getElementById('declineCardBtn');
        const dice1 = document.getElementById('dice1');
        const dice2 = document.getElementById('dice2');
        const cardArea = document.getElementById('cardArea');
        const gameLog = document.getElementById('gameLog');

        // =========== INICIALIZA√á√ÉO ===========
        document.addEventListener('DOMContentLoaded', () => {
            initGame();
            updateDisplay();
        });

        function initGame() {
            // Event Listeners
            rollDiceBtn.addEventListener('click', rollDice);
            endTurnBtn.addEventListener('click', endTurn);
            showAssetsBtn.addEventListener('click', showAssets);
            newGameBtn.addEventListener('click', newGame);
            acceptCardBtn.addEventListener('click', acceptCard);
            declineCardBtn.addEventListener('click', declineCard);
            
            // Atualiza status inicial
            updatePlayerStatus();
        }

        // =========== ATUALIZA DISPLAY ===========
        function updateDisplay() {
            const p1 = gameState.players[1];
            const p2 = gameState.players[2];
            
            // Jogador 1
            document.getElementById('p1Profession').textContent = p1.profession;
            document.getElementById('p1Salary').textContent = `R$ ${p1.salary.toLocaleString()}`;
            document.getElementById('p1Expenses').textContent = `R$ ${p1.expenses.toLocaleString()}`;
            document.getElementById('p1Cashflow').textContent = `R$ ${p1.cashflow.toLocaleString()}`;
            document.getElementById('p1Cash').textContent = `R$ ${p1.cash.toLocaleString()}`;
            document.getElementById('p1Passive').textContent = `R$ ${p1.passiveIncome.toLocaleString()}`;
            document.getElementById('p1Position').textContent = p1.position;
            document.getElementById('p1Space').textContent = gameState.spaces[p1.position].name;
            
            // Jogador 2
            document.getElementById('p2Profession').textContent = p2.profession;
            document.getElementById('p2Salary').textContent = `R$ ${p2.salary.toLocaleString()}`;
            document.getElementById('p2Expenses').textContent = `R$ ${p2.expenses.toLocaleString()}`;
            document.getElementById('p2Cashflow').textContent = `R$ ${p2.cashflow.toLocaleString()}`;
            document.getElementById('p2Cash').textContent = `R$ ${p2.cash.toLocaleString()}`;
            document.getElementById('p2Passive').textContent = `R$ ${p2.passiveIncome.toLocaleString()}`;
            document.getElementById('p2Position').textContent = p2.position;
            document.getElementById('p2Space').textContent = gameState.spaces[p2.position].name;
            
            // Atualiza status dos jogadores
            updatePlayerStatus();
        }

        function updatePlayerStatus() {
            const p1Status = document.getElementById('player1Status');
            const p2Status = document.getElementById('player2Status');
            
            if (gameState.currentPlayer === 1) {
                p1Status.textContent = "SUA VEZ";
                p1Status.className = "player-status current-turn";
                p2Status.textContent = "AGUARDANDO";
                p2Status.className = "player-status";
            } else {
                p1Status.textContent = "AGUARDANDO";
                p1Status.className = "player-status";
                p2Status.textContent = "SUA VEZ";
                p2Status.className = "player-status current-turn";
            }
        }

        // =========== ROLAR DADOS ===========
        function rollDice() {
            if (!gameState.gameActive) return;
            
            // Anima os dados
            dice1.classList.add('rolling');
            dice2.classList.add('rolling');
            rollDiceBtn.disabled = true;
            
            // Rola ap√≥s anima√ß√£o
            setTimeout(() => {
                const dice1Val = Math.floor(Math.random() * 6) + 1;
                const dice2Val = Math.floor(Math.random() * 6) + 1;
                const total = dice1Val + dice2Val;
                
                dice1.textContent = dice1Val;
                dice2.textContent = dice2Val;
                dice1.classList.remove('rolling');
                dice2.classList.remove('rolling');
                
                gameState.diceValue = total;
                
                // Move o jogador
                movePlayer(gameState.currentPlayer, total);
                
                // Permite finalizar turno
                endTurnBtn.disabled = false;
                
                addLog(`üé≤ Jogador ${gameState.currentPlayer} rolou ${dice1Val}+${dice2Val}=${total}`);
            }, 800);
        }

        // =========== MOVER JOGADOR ===========
        function movePlayer(playerId, steps) {
            const player = gameState.players[playerId];
            
            // Move na pista
            player.position = (player.position + steps) % gameState.spaces.length;
            
            // Se passou pelo in√≠cio, recebe sal√°rio
            if (player.position < steps && steps > 0) {
                payday(playerId);
            }
            
            // Ativa o espa√ßo
            activateSpace(playerId, player.position);
            
            updateDisplay();
        }

        // =========== ATIVAR ESPA√áO ===========
        function activateSpace(playerId, position) {
            const player = gameState.players[playerId];
            const space = gameState.spaces[position];
            
            addLog(`üìç Jogador ${playerId} parou em: ${space.name}`);
            
            switch(space.type) {
                case 'payday':
                    payday(playerId);
                    break;
                case 'small':
                    showCard('small', playerId);
                    break;
                case 'big':
                    showCard('big', playerId);
                    break;
                case 'doodad':
                    showCard('doodad', playerId);
                    break;
                case 'market':
                    showCard('market', playerId);
                    break;
                case 'baby':
                    haveBaby(playerId);
                    break;
                case 'charity':
                    charity(playerId);
                    break;
                case 'start':
                    addLog(`üéØ Jogador ${playerId} passou pelo in√≠cio`);
                    break;
            }
        }

        // =========== DIA DE PAGAMENTO ===========
        function payday(playerId) {
            const player = gameState.players[playerId];
            
            // Recebe sal√°rio + renda passiva
            const totalIncome = player.salary + player.passiveIncome;
            player.cash += totalIncome;
            
            addLog(`üí∞ Jogador ${playerId} recebeu: Sal√°rio R$ ${player.salary.toLocaleString()} + Renda Passiva R$ ${player.passiveIncome.toLocaleString()} = R$ ${totalIncome.toLocaleString()}`, 'income');
            updateDisplay();
        }

        // =========== MOSTRAR CARTA ===========
        function showCard(type, playerId) {
            const cardArray = cards[type];
            const randomCard = cardArray[Math.floor(Math.random() * cardArray.length)];
            
            gameState.currentCard = {
                ...randomCard,
                playerId: playerId,
                type: type
            };
            
            // Mostra √°rea da carta
            cardArea.style.display = 'block';
            cardArea.scrollIntoView({ behavior: 'smooth' });
            
            // Atualiza conte√∫do da carta
            document.getElementById('cardType').textContent = type === 'small' ? 'PEQUENA OPORTUNIDADE' : 
                                                              type === 'big' ? 'GRANDE OPORTUNIDADE' :
                                                              type === 'doodad' ? 'DOODAD - GASTO' : 'CARTA DE MERCADO';
            
            let description = '';
            let details = '';
            
            if (type === 'small' || type === 'big') {
                description = `<strong>${randomCard.name}</strong><br>${randomCard.type.toUpperCase()}`;
                details = `
                    <div><strong>Custo Total:</strong> R$ ${randomCard.cost.toLocaleString()}</div>
                    <div><strong>Entrada:</strong> R$ ${randomCard.down.toLocaleString()}</div>
                    <div><strong>Renda Mensal:</strong> +R$ ${randomCard.cashflow}</div>
                `;
            } else if (type === 'doodad') {
                description = `<strong>${randomCard.name}</strong><br>${randomCard.description}`;
                details = `
                    <div><strong>Custo:</strong> R$ ${randomCard.cost.toLocaleString()}</div>
                    ${randomCard.monthly > 0 ? `<div><strong>Parcela Mensal:</strong> R$ ${randomCard.monthly}</div>` : ''}
                `;
            } else if (type === 'market') {
                description = `<strong>${randomCard.name}</strong><br>${randomCard.description}`;
                details = `
                    <div><strong>Efeito:</strong> ${randomCard.effect === 'a√ß√µes' ? 'Afeta suas A√á√ïES' : 'Afeta seus IM√ìVEIS'}</div>
                    <div><strong>Varia√ß√£o:</strong> ${randomCard.modifier > 1 ? '+' : ''}${((randomCard.modifier - 1) * 100).toFixed(0)}%</div>
                `;
            }
            
            document.getElementById('cardDescription').innerHTML = description;
            document.getElementById('cardDetails').innerHTML = details;
        }

        // =========== ACEITAR CARTA ===========
        function acceptCard() {
            const card = gameState.currentCard;
            const player = gameState.players[card.playerId];
            
            if (card.type === 'small' || card.type === 'big') {
                // Compra de ativo
                if (player.cash < card.down) {
                    alert(`Dinheiro insuficiente! Necess√°rio: R$ ${card.down.toLocaleString()}`);
                    return;
                }
                
                player.cash -= card.down;
                player.passiveIncome += card.cashflow;
                player.assets.push({
                    name: card.name,
                    type: card.type,
                    value: card.down,
                    cashflow: card.cashflow
                });
                
                addLog(`‚úÖ Jogador ${card.playerId} comprou ${card.name} por R$ ${card.down.toLocaleString()} (renda: +R$ ${card.cashflow}/m√™s)`, 'income');
                
                // Verifica se pode sair da Corrida dos Ratos
                checkExitRatRace(card.playerId);
                
            } else if (card.type === 'doodad') {
                // Gasto
                if (player.cash < card.cost) {
                    alert(`Dinheiro insuficiente! Necess√°rio: R$ ${card.cost.toLocaleString()}`);
                    return;
                }
                
                player.cash -= card.cost;
                
                if (card.monthly > 0) {
                    player.expenses += card.monthly;
                    player.cashflow = player.salary - player.expenses;
                    player.liabilities.push({
                        name: card.name,
                        monthly: card.monthly
                    });
                }
                
                addLog(`üí∏ Jogador ${card.playerId} gastou R$ ${card.cost.toLocaleString()} em ${card.name}`, 'expense');
                
            } else if (card.type === 'market') {
                // Efeito de mercado
                applyMarketEffect(card.playerId, card);
            }
            
            // Esconde a carta
            cardArea.style.display = 'none';
            updateDisplay();
        }

        // =========== RECUSAR CARTA ===========
        function declineCard() {
            const card = gameState.currentCard;
            addLog(`‚ùå Jogador ${card.playerId} recusou a oportunidade`);
            cardArea.style.display = 'none';
        }

        // =========== APLICAR EFEITO DE MERCADO ===========
        function applyMarketEffect(playerId, card) {
            const player = gameState.players[playerId];
            let effectApplied = false;
            
            player.assets.forEach(asset => {
                if ((card.effect === 'a√ß√µes' && asset.type === 'small') || 
                    (card.effect === 'im√≥vel' && asset.type === 'big')) {
                    
                    // Ajusta valor do ativo
                    const oldValue = asset.value;
                    asset.value = Math.round(asset.value * card.modifier);
                    const difference = asset.value - oldValue;
                    
                    // Se for mercado em alta para im√≥veis, aumenta renda
                    if (card.effect === 'im√≥vel' && card.modifier > 1) {
                        asset.cashflow = Math.round(asset.cashflow * 1.2);
                        player.passiveIncome += (asset.cashflow - (asset.cashflow / 1.2));
                    }
                    
                    effectApplied = true;
                    addLog(`üìà ${card.name}: ${asset.name} ${difference >= 0 ? 'valorizou' : 'desvalorizou'} R$ ${Math.abs(difference).toLocaleString()}`, 
                           difference >= 0 ? 'income' : 'expense');
                }
            });
            
            if (!effectApplied) {
                addLog(`üìä ${card.name} (n√£o afetou seus ativos)`);
            }
            
            updateDisplay();
        }

        // =========== TER UM BEB√ä ===========
        function haveBaby(playerId) {
            const player = gameState.players[playerId];
            const babyCost = 300;
            
            player.expenses += babyCost;
            player.cashflow = player.salary - player.expenses;
            
            addLog(`üë∂ Jogador ${playerId} teve um beb√™! Despesas +R$ ${babyCost}/m√™s`, 'expense');
            updateDisplay();
        }

        // =========== CARIDADE ===========
        function charity(playerId) {
            const player = gameState.players[playerId];
            const charityAmount = Math.floor(player.salary * 0.1); // 10% do sal√°rio
            
            if (player.cash >= charityAmount) {
                player.cash -= charityAmount;
                addLog(`‚ù§Ô∏è Jogador ${playerId} doou R$ ${charityAmount.toLocaleString()} para caridade`, 'expense');
            } else {
                addLog(`‚ù§Ô∏è Jogador ${playerId} quis doar, mas n√£o tinha dinheiro suficiente`);
            }
            
            updateDisplay();
        }

        // =========== VERIFICAR SA√çDA DA CORRIDA DOS RATOS ===========
        function checkExitRatRace(playerId) {
            const player = gameState.players[playerId];
            
            if (player.passiveIncome > player.expenses && player.inRatRace) {
                player.inRatRace = false;
                addLog(`üöÄüéâ JOGADOR ${playerId} SAIU DA CORRIDA DOS RATOS! Agora est√° na VIA R√ÅPIDA!`, 'income');
                
                // Adiciona um sonho
                const dreams = ['üèùÔ∏è Viagem ao Caribe', 'üöó Carro Esportivo', 'üè† Casa na Praia', '‚úàÔ∏è Jato Particular'];
                const randomDream = dreams[Math.floor(Math.random() * dreams.length)];
                player.dreams.push(randomDream);
                
                // Atualiza display do sonho
                const dreamElement = document.getElementById(`p${playerId}Dreams`);
                if (dreamElement) {
                    dreamElement.innerHTML = `<div style="color: gold; margin-top: 10px;">
                        <i class="fas fa-trophy"></i> SONHO: ${randomDream}
                    </div>`;
                }
                
                // Verifica vit√≥ria
                if (player.dreams.length >= 2) { // Precisa de 2 sonhos para vencer
                    declareWinner(playerId);
                }
            }
        }

        // =========== DECLARAR VENCEDOR ===========
        function declareWinner(playerId) {
            gameState.gameActive = false;
            
            const winnerMessage = document.getElementById('winnerMessage');
            winnerMessage.innerHTML = `
                <div class="winner-banner">
                    üèÜüéâ VIT√ìRIA DO JOGADOR ${playerId}! üéâüèÜ<br>
                    <small>Voc√™ realizou seus sonhos na Via R√°pida!</small>
                </div>
            `;
            
            addLog(`üèÜüéâ JOGADOR ${playerId} VENCEU O JOGO! PARAB√âNS! üéâüèÜ`, 'income');
            
            // Desativa bot√µes
            rollDiceBtn.disabled = true;
            endTurnBtn.disabled = true;
        }

        // =========== FINALIZAR TURNO ===========
        function endTurn() {
            // Passa para o pr√≥ximo jogador
            gameState.currentPlayer = gameState.currentPlayer === 1 ? 2 : 1;
            
            // Reseta controles
            endTurnBtn.disabled = true;
            rollDiceBtn.disabled = false;
            
            // Esconde carta se estiver aberta
            cardArea.style.display = 'none';
            
            // Atualiza display
            updateDisplay();
            
            addLog(`üîÑ Turno do Jogador ${gameState.currentPlayer}`);
        }

        // =========== VER ATIVOS ===========
        function showAssets() {
            const playerId = gameState.currentPlayer;
            const player = gameState.players[playerId];
            
            let html = `<h3>${player.name} - ${player.profession}</h3>`;
            
            // Ativos
            html += `<h4 style="color: #27ae60; margin-top: 20px;">ATIVOS (Renda Passiva: R$ ${player.passiveIncome}/m√™s)</h4>`;
            if (player.assets.length === 0) {
                html += '<p>Nenhum ativo adquirido.</p>';
            } else {
                player.assets.forEach(asset => {
                    html += `
                        <div class="asset-card">
                            <div class="asset-name">${asset.name}</div>
                            <div>Valor: R$ ${asset.value.toLocaleString()}</div>
                            <div class="asset-value">Renda: +R$ ${asset.cashflow}/m√™s</div>
                        </div>
                    `;
                });
            }
            
            // Passivos
            html += `<h4 style="color: #e74c3c; margin-top: 20px;">PASSIVOS</h4>`;
            if (player.liabilities.length === 0) {
                html += '<p>Nenhum passivo adquirido.</p>';
            } else {
                player.liabilities.forEach(liability => {
                    html += `
                        <div class="asset-card" style="border-left-color: #e74c3c;">
                            <div class="asset-name">${liability.name}</div>
                            <div style="color: #e74c3c;">Despesa: R$ ${liability.monthly}/m√™s</div>
                        </div>
                    `;
                });
            }
            
            // Sonhos
            if (player.dreams.length > 0) {
                html += `<h4 style="color: #f39c12; margin-top: 20px;">SONHOS REALIZADOS</h4>`;
                player.dreams.forEach(dream => {
                    html += `<p>‚≠ê ${dream}</p>`;
                });
            }
            
            document.getElementById('assetsContent').innerHTML = html;
            document.getElementById('assetsTitle').textContent = `${player.name} - Ativos e Passivos`;
            openModal('assetsModal');
        }

        // =========== NOVO JOGO ===========
        function newGame() {
            if (!confirm("Iniciar um novo jogo? O progresso atual ser√° perdido.")) return;
            
            // Reseta estado
            gameState.currentPlayer = 1;
            gameState.gameActive = true;
            
            // Profiss√µes aleat√≥rias
            const professions = [
                {name: "Enfermeiro", salary: 3500, expenses: 2800},
                {name: "Professor", salary: 4200, expenses: 3500},
                {name: "Mec√¢nico", salary: 2800, expenses: 2350},
                {name: "Secret√°ria", salary: 3200, expenses: 2650},
                {name: "Policial", salary: 3800, expenses: 3100},
                {name: "Motorista", salary: 3000, expenses: 2500}
            ];
            
            const shuffled = [...professions].sort(() => Math.random() - 0.5);
            
            // Reseta jogador 1
            gameState.players[1] = {
                name: "Jogador 1 (Voc√™)",
                profession: shuffled[0].name,
                salary: shuffled[0].salary,
                expenses: shuffled[0].expenses,
                cashflow: shuffled[0].salary - shuffled[0].expenses,
                cash: 1000,
                passiveIncome: 0,
                position: 0,
                inRatRace: true,
                assets: [],
                liabilities: [],
                dreams: []
            };
            
            // Reseta jogador 2
            gameState.players[2] = {
                name: "Jogador 2 (Irm√£o)",
                profession: shuffled[1].name,
                salary: shuffled[1].salary,
                expenses: shuffled[1].expenses,
                cashflow: shuffled[1].salary - shuffled[1].expenses,
                cash: 1000,
                passiveIncome: 0,
                position: 0,
                inRatRace: true,
                assets: [],
                liabilities: [],
                dreams: []
            };
            
            // Reseta interface
            dice1.textContent = "?";
            dice2.textContent = "?";
            cardArea.style.display = 'none';
            document.getElementById('winnerMessage').innerHTML = '';
            document.getElementById('p1Dreams').innerHTML = '';
            document.getElementById('p2Dreams').innerHTML = '';
            
            // Ativa bot√µes
            rollDiceBtn.disabled = false;
            endTurnBtn.disabled = true;
            
            // Limpa e reinicia log
            clearLog();
            addLog("üîÑ NOVO JOGO INICIADO!");
            addLog(`üë§ Jogador 1 √© ${gameState.players[1].profession}`);
            addLog(`üë§ Jogador 2 √© ${gameState.players[2].profession}`);
            addLog("üé≤ √â a vez do Jogador 1");
            
            updateDisplay();
        }

        // =========== FUN√á√ïES AUXILIARES ===========
        function addLog(message, type = '') {
            const entry = document.createElement('div');
            entry.className = 'log-entry';
            
            if (type === 'income') {
                entry.classList.add('log-income');
            } else if (type === 'expense') {
                entry.classList.add('log-expense');
            } else if (message.includes('Jogador 1')) {
                entry.classList.add('log-player1');
            } else if (message.includes('Jogador 2')) {
                entry.classList.add('log-player2');
            }
            
            entry.textContent = message;
            gameLog.prepend(entry);
            
            // Mant√©m apenas as √∫ltimas 20 entradas
            if (gameLog.children.length > 20) {
                gameLog.removeChild(gameLog.lastChild);
            }
        }

        function clearLog() {
            gameLog.innerHTML = '<div class="log-entry">Log limpo. Jogo em andamento...</div>';
        }

        function openModal(modalId) {
            document.getElementById(modalId).style.display = 'flex';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // Fecha modal ao clicar fora
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.style.display = 'none';
            }
        };
    </script>
</body>
</html>